---
title: "Schlussbericht _draft01_"
author: "CS-Team"
date: "2020 05 04"
output:
  html_document:
      toc: true
      toc_depth: 5
---

****

```{r setup, include=FALSE}

## 0.1: cleaing memory
rm(list=ls(all=T))

## 0.2 defining options
options(repos="https://cran.rstudio.com")
options(stringsAsFactors = FALSE)
knitr::opts_chunk$set(echo = TRUE, fig.width = 7, fig.height = 5)

## 0.3 installing and loading needed packages
# install & load packages
# install.packages("dplyr")
library(dplyr)
# install.packages("knitr")
library(knitr)
# install.packages("kableExtra")
library(kableExtra)
# install.packages("rvest")
library(rvest)
# install.packages("magrittr")
library(magrittr)
# install.packages("pageviews")
# library(pageviews)
# install.packages("WikipediR")
# library(WikipediR)
# install.packages("ggplot2")
# library(ggplot2)
# install.packages("tibble")
# library(tibble)
# install.packages("quanteda")
library(quanteda)
# install.packages("stargazer")
library(stargazer)
# install.packages("tidyr")
library(tidyr)
# install.packages("stringr")
library(stringr)
# install.packages("effects")
library(effects)


```

&nbsp;

***


### Change Log


* *draft01*
  + Erster Entwurf, Übertragen des `.doc-files` in Markdown
  
&nbsp;

***

### 0. Daten Einlesen & Vorbereiten


```{r 00, include = TRUE, results = TRUE, eval = TRUE, message = FALSE, warning = FALSE}

# Grunddatensatz Einlesen
data00 <- readRDS("./Rohdaten/df_all_data_draft07.rds")

# nur amtierende filtern
data00 <- data00 %>% filter(rat %in% c("SR", "NR"))

# Kleinparteien den Fraktionen zuordnen
data00$party_short[data00$party_short=="ALG"] <- "GPS"
data00$party_short[data00$party_short=="BastA!"] <- "GPS"
data00$party_short[data00$party_short=="PdA"] <- "GPS"
data00$party_short[data00$party_short=="solid."] <- "GPS"
data00$party_short[data00$party_short=="LDP"] <- "FDP"
data00$party_short[data00$party_short=="EVP"] <- "CVP"
data00$party_short[data00$party_short=="BDP"] <- "CVP"
data00$party_short[data00$party_short=="EDU"] <- "SVP"
data00$party_short[data00$party_short=="Lega"] <- "SVP"
data00$party_short[data00$party_short=="Parteilos"] <- "SVP"

# status als faktor setzten
data00[ , "status"] <- as.factor(as.character(data00[ , "status"]))

#  Maenner und CVP als Referenzkategorien setzen
data00[ , "party_short"] <- as.factor(as.character(data00[, "party_short"]))
data00[ , "gender"] <- as.factor(as.character(data00[, "gender"]))
data00$gender <- relevel(x = data00$gender, ref = "m")
data00$party_short <- relevel(x = data00$party_short, ref = "CVP")



```



```{r 01, include = TRUE, results = FALSE, eval = TRUE, message = FALSE, warning = FALSE}

## Beispiel Graphik abspeichern & Einfügen
# Modell Rechnen
regres_01 <- lm(wrd_no_wiki ~ gender, data = data00)
regres_02 <- lm(wrd_no_wiki ~ gender + rat, data = data00)
regres_03 <- lm(wrd_no_wiki ~ gender + rat + gender*rat, data = data00)

# Bezeichnung Definieren und Speichern
cov_nm <- c("Frau", "Ständerat", "Frau x Ständerat")
dep_nm <- c("Anzahl Worte [-]")
tab_00 <- stargazer(regres_01, regres_02, regres_03, type = "html",
          covariate.labels = cov_nm, dep.var.caption = "Abhängige Variable",
          dep.var.labels = dep_nm)


## Beispiel Werte Abspeichern und im Text Aufrufen
df_00 <- cbind.data.frame(gender = "f", rat = "NR")
prd_00 <- predict(regres_03, newdata = df_00, 
                  interval = "confidence", level = 0.90)
wrd_f_NR_mn <- prd_00[[1]] %>%  round(., digits = 2)
wrd_f_NR_lo <- prd_00[[2]] %>%  round(., digits = 2)
wrd_f_NR_up <- prd_00[[3]] %>%  round(., digits = 2)

# Speichern der Tabelle
stargazer(regres_01, regres_02, regres_03, type = "html",
          covariate.labels = cov_nm, dep.var.caption = "Abhängige Variable",
          dep.var.labels = dep_nm, out = "./GrafikenTabellen/stargazer_test00.html")


```


# *Spezial* - Einfügen von Zahlen, Bildern und Links in R-Markdown

<u>Einfügen von Zahlen</u>

Die Länge der Wikipediatexte beträgt für Nationalrätinnen im Durchschnitt `r wrd_f_NR_mn`, mit einem 90% Konfidenzintervall das von `r wrd_f_NR_lo` bis `r wrd_f_NR_up` reicht.


<u>Einfügen fertiger Grafik</u>
 
 Und hier sehen wir die Regressionstabelle (vorgängig als `.png` abgespeichert) dazu: ![Tabelle](.\GrafikenTabellen\stargazer_test00.png)

<u>Einfügen von Links</u>
 Hier ist der Link zum [Cheatsheat](https://rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf).

<u>Alternatives Einfügen von Grafik?</u>
```{r 00_01, include = TRUE, results = "asis", eval = TRUE, message = FALSE, warning = FALSE}

stargazer(regres_01, regres_02, regres_03, type = "html",
          covariate.labels = cov_nm, dep.var.caption = "Abhängige Variable",
          dep.var.labels = dep_nm)

```







***

# 1. Zusammenfassung
-	…Zusammenfassung (incl. Wichtigste Erkenntnisse) … 
-	…Roter Faden: z.B. Wikipedia-Untersuchung, Verweis auf Hack-a-thon ()

# 2. Einleitung
-	…Hintergrund Wahlen 2019… 
-	…Beschrieb des Auftrags…
-	...personalisieren… 
-	…gesetzte Ziele… 
-	…Reflektion… 

# 3. Bericht 
…Arbeitshypothese I = stereotype immer noch lebendig
…Arbeitshypothese II = Parteien grösserer Einfluss als Geschlecht…
…was getan/untersucht, wir haben wikipedia untersucht. Und zwar:
-	Inhaltsanalyse
-	Nach Lebensbereichen
-	Nach Politikbereichen
-	Deskriptives
-	Klickzahlen
-	Editierzahlen

….2 bis 3 erstaunliche oder erwartete Erkenntnisse mit Bezug auf die Arbeitshypothesen (Text und Grafik), z.B. «Keine Unterschiede zwischen den Geschlechtern hinsichtlich der Lebensbereiche», «Bisherige haben länger eine Wiki-Page als Neue»…

## 3.1 Wikipedia-Analyse: Inhaltsanalyse
In der Inhaltsanalyse wurden die Wikipedia-Texte per 2019-12-31 mit einer Sammlung von Schlüsselworten abgeglichen. Jede dieser Schlüsselwort-Sammlungen enthält Schlüsselworte, die für den jeweiligen Lebensbereich typisch sind. So zeigt das Schlüsselwort «Streik» beispielsweise an, dass es in diesem Text um den Lebensbereich Engagement geht. Die Treffer dieses Abgleichs wurden prozentual verrechnet. So zeigt ein Wert von 51 % für den Lebensbereich Politik an, dass 51 % aller Treffer aus der Schlüsselwortsammlung Politik stammen. Die Schlüsselwortsammlungen wurden von Hand erstellt und einmalig mit einer Handcodierung verglichen und validiert.

## 3.2 Inhaltsanalyse: Lebensbereiche
Wir haben zudem die Betonung von Lebensbereichen auf den Wikipedia-Seiten von Politikerinnen und Politikern untersucht. Dabei haben wir 5 Lebensbereiche unterschieden: Ausbildung, Beruf, Engagement, Politik und Privates.
Generell kann gesagt werden, dass es keine Geschlechterunterschiede gibt in der Betonung dieser Lebensbereiche. Ein Vergleich der Frauen und Männer zeigt keinen signifikanten Unterschied. Dieses Ergebnis ist in Abbildung 1 dargestellt. Die Mittelwerte der Politikerinnen und Politiker liegen sehr nahe beieinander. Zudem wird in dieser Darstellung klar, dass Politik mit 58 – 59 % am meisten und Engagement mit 6 – 8 % am wenigsten betont wird.

Abbildung 1: Geschlechterunterschiede Lebensbereiche
 

In keinem der von uns berechneten Modelle hat das Geschlecht einen signifikanten Effekt auf die Anzahl Nennungen der jeweiligen Lebensbereiche. Daraus kann geschlossen werden, dass Politikerinnen und Politiker die Lebensbereiche ungefähr gleich betonen. Das ist insbesondere relevant und wünschenswert, weil somit Geschlechterstereotypen nicht reproduziert werden.
Spannende Unterschiede ergeben sich jedoch, wenn zwischen den Parteien verglichen wird. So besteht ein signifikanter Unterschied zwischen Grünen Politikerinnen und Politikern in der Betonung des Privaten – Politikerinnen schreiben rund einen Drittel mehr über Privates, als das Politiker tun (18.94 % resp. 11.70 %). Unsere Regressionsanalysen bestätigen dieses Ergebnis, siehe Abbildung 3.

Abbildung 2: Partei-Geschlechterunterschiede Lebensbereich “Privat”
 

… weitere Erkenntnisse….

## 3.3 Inhaltsanalyse Politikbereiche
… analog zu «Lebensbereiche»


## 3.4 Wikipedia-Analyse: Deskriptives
… Beschrieb analog zu «Lebensbereiche»


## 3.5 Deskriptives: Länge, Klickzahlen und Editierungen
… analog zu «Lebensbereiche»


# Daten und Methoden (Appendix)

## Datenbeschaffung
-	Wikipedia-Scraping
-	Dictionaire. Erstellen und Verifizierung
-	Lebensbereiche
-	Poltikbereiche

## Beschreibende Statistik
-	Beschreibende Statistiken aller/ausgewählter Variablen

… evtl: 
Grafiken der wichtigsten Erkenntnisse. 
-	Hantel-Diagramme: Anteil Politikbereiche
-	Welche Politikbereiche?
-	Welche Unterscheidungen? (Geschlecht, Status, Partei, etc.)
-	Hantel-Diagramme: Anteil Lebensbereiche
-	Welche Politikbereiche?
-	Welche Unterscheidungen? (Geschlecht, Status, Partei, etc.)
-	Linien-Graph: Wikipedia-Klickzahl vs. Zeit
-	Geschlecht
-	Status
-	Partei
-	Weitere?
-	Linien-Graph: Wikipedia-Änderungen vs. Zeit
-	Geschlecht
-	Status
-	Partei
-	Weitere?...
 
## Regressions-Tabellen
Abbildung 3: Regressionsergebnisse "Anteil Privates"
 


Signifikanzen Ergebnisse
Modell: 
priv_rel_prc_wiki ~ gender*party_short + rat + status + age2019 + age2019_2 + region

Eingabe: 
Gender = “f”/”m”, rat = "SR", status = "neu", party_short = "GPS", age2019 = 51, age2019_2 = 2601, region = "lat"

GPS Frauen: Mittelwert = 18.94; Unterer KI (90%) = 15.05 Oberer KI (90%) = 22.84
GPS Männer: Mittelwert = 11.70; Unterer KI (90%) = 7.23; Oberer KI (90%) = 16.17


 
Abbildung 4: Anteil Privates – Alternative Darstellung
 
Signifikanzen Ergebnisse
Modell:
priv_rel_prc_wiki ~ gender*party_short + rat + status + age2019 + age2019_2 + region 

Eingabe:
Gender = “f”/”m”, Partei = GLP

GPS Frauen: Mittelwert = 16.67; Unterer KI (90%) = 13.61; Oberer KI (90%) = 19.72
GPS Männer: Mittelwert = 12.19; Unterer KI (90%) = 8.40; Oberer KI (90%) = 15.98


 
Reproduktions-R-Code
… Einfügen einzelner Berechnungs-Codes…
… Ein Zusammenführ-Code…
